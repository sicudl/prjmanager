import{resolveComponent as e,openBlock as t,createBlock as l,withCtx as n,createVNode as a,createTextVNode as i}from"vue";var o={data:()=>({collections:null,selectedProject:null,projects:[],selectedStakeholders:[],stakeholders:[],title:"",body:""}),methods:{projectChanged:function(e){console.log("Changed")},sendComunication:function(){var e={title:this.title,body:this.body,project_id:this.selectedProject,recipients:this.selectedStakeholders.map((e=>({stakeholders_id:e})))};this.system.api.post("/items/comunication",e).then((e=>{console.log("OK")})).catch((e=>{console.log(e)}))},loadStakeholders:function(e){this.system.api.get("/items/stakeholders?limit=-1&?filter[project_id][_eq]="+e).then((e=>{this.selectedStakeholders=[],this.stakeholders=e.data.data}))}},watch:{selectedProject:function(e){this.loadStakeholders(e)}},inject:["system"],mounted(){this.system.api.get("/items/project?limit=-1").then((e=>{if(this.projects=e.data.data,this.$route.query.id){this.projects.find((e=>e.id===parseInt(this.$route.query.id)))&&(this.selectedProject=parseInt(this.$route.query.id))}})),console.log("selectedProject",this.selectedProject)}};const s={class:"form grid with-fill"},d={class:"field full"},r=a("div",{class:"label type-label"},[a("span",null,"Projecte:")],-1),c={class:"field full"},u=a("div",{class:"label type-label"},[a("span",null,"Interessats/des:")],-1),m={class:"field full"},p=a("div",{class:"label type-label"},[a("span",null,"Assumpte:")],-1),f={class:"field full"},h=a("div",{class:"label type-label"},[a("span",null,"Cos:")],-1),v={class:"field full"},g=i("Click me!");var y=[],b=[];!function(e,t){if(e&&"undefined"!=typeof document){var l,n=!0===t.prepend?"prepend":"append",a=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(a){var o=y.indexOf(i);-1===o&&(o=y.push(i)-1,b[o]={}),l=b[o]&&b[o][n]?b[o][n]:b[o][n]=s()}else l=s();65279===e.charCodeAt(0)&&(e=e.substring(1)),l.styleSheet?l.styleSheet.cssText+=e:l.appendChild(document.createTextNode(e))}function s(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var l=Object.keys(t.attributes),a=0;a<l.length;a++)e.setAttribute(l[a],t.attributes[l[a]]);var o="prepend"===n?"afterbegin":"beforeend";return i.insertAdjacentElement(o,e),e}}("\n.form {\n\tdisplay: grid;\n\tpadding: var(--content-padding);\n    padding-bottom: var(--content-padding-bottom);\n\tgap: var(--form-vertical-gap) var(--form-horizontal-gap);\n}\n.with-fill {\n\tgrid-template-columns: [start] minmax(0,var(--form-column-max-width)) [half] minmax(0,var(--form-column-max-width)) [full] 1fr [fill];\n}\n.field {\n\t    position: relative;\n}\n.form .full{\n\tgrid-column: start/full;\n}\n.label {\n    position: relative;\n    display: flex;\n    width: max-content;\n    margin-bottom: 8px;\n    cursor: pointer;\n}\n.type-label {\n    color: var(--foreground-normal-alt);\n    font-weight: 600;\n    font-size: 16px;\n    font-family: var(--family-sans-serif);\n    font-style: normal;\n    line-height: 19px;\n}\n",{}),o.render=function(i,o,y,b,j,x){const k=e("v-select"),V=e("v-input"),C=e("v-textarea"),S=e("v-button"),P=e("private-view");return t(),l(P,{title:"Envia una comunicaciÃ³"},{default:n((()=>[a("div",s,[a("div",d,[r,a(k,{"item-text":"name","item-value":"id",modelValue:j.selectedProject,"onUpdate:modelValue":o[1]||(o[1]=e=>j.selectedProject=e),items:j.projects},null,8,["modelValue","items"])]),a("div",c,[u,a(k,{label:"Interessats","item-text":"name","item-value":"id",modelValue:j.selectedStakeholders,"onUpdate:modelValue":o[2]||(o[2]=e=>j.selectedStakeholders=e),multiple:"true",items:j.stakeholders},null,8,["modelValue","items"])]),a("div",m,[p,a(V,{modelValue:j.title,"onUpdate:modelValue":o[3]||(o[3]=e=>j.title=e)},null,8,["modelValue"])]),a("div",f,[h,a(C,{modelValue:j.body,"onUpdate:modelValue":o[4]||(o[4]=e=>j.body=e)},null,8,["modelValue"])]),a("div",v,[a(S,{onClick:x.sendComunication},{default:n((()=>[g])),_:1},8,["onClick"])])])])),_:1})},o.__file="module.vue";var j={id:"comunications",name:"Comunications",icon:"mail",routes:[{path:"",component:o}]};export default j;
